<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xmlns:task="http://www.springframework.org/schema/task"
    xsi:schemaLocation="http://www.springframework.org/schema/mvc
        http://www.springframework.org/schema/mvc/spring-mvc-4.1.xsd
        http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/task
		http://www.springframework.org/schema/task/spring-task-3.1.xsd
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context-4.1.xsd">


    <!-- <context:component-scan base-package="edu.iasd.Controller"></context:component-scan> -->
    
	<mvc:resources location="/WEB-INF/static/fonts/" mapping="fonts/**"></mvc:resources>
	<mvc:resources location="/WEB-INF/static/img/" mapping="img/**"></mvc:resources>
	<mvc:resources location="/WEB-INF/static/images/" mapping="images/**"></mvc:resources>	
	<mvc:resources location="/WEB-INF/static/js/" mapping="js/**"></mvc:resources>
	<mvc:resources location="/WEB-INF/static/myjs/" mapping="myjs/**"></mvc:resources>
	<mvc:resources location="/WEB-INF/static/css/" mapping="css/**"></mvc:resources>
	<mvc:resources location="/WEB-INF/upload/" mapping="upload/**"></mvc:resources>
	<mvc:resources location="/WEB-INF/ueditor1_4_3_3/" mapping="ueditor/**"  />
	<mvc:resources location="/WEB-INF/static/bower_components/bootstrap/dist/js/" mapping="bower_components/bootstrap/dist/js/**"></mvc:resources>
	<mvc:resources location="/WEB-INF/static/bower_components/moment/min/" mapping="bower_components/moment/min/**"></mvc:resources>
	<mvc:resources location="/WEB-INF/static/bower_components/chosen/" mapping="bower_components/chosen/**"></mvc:resources>
	<mvc:resources location="/WEB-INF/static/bower_components/responsive-tables/" mapping="bower_components/responsive-tables/**"></mvc:resources>
	<mvc:resources location="/WEB-INF/static/bower_components/bootstrap-tour/build/js/" mapping="bower_components/bootstrap-tour/build/js/**"></mvc:resources>
	<mvc:resources location="/WEB-INF/static/bower_components/colorbox/" mapping="bower_components/colorbox/**"></mvc:resources>	
	<mvc:resources location="/WEB-INF/static/bower_components/jquery/" mapping="bower_components/jquery/**"></mvc:resources>
	<mvc:resources location="/WEB-INF/static/bower_components/fullcalendar/dist/" mapping="bower_components/fullcalendar/dist/**"></mvc:resources>
    <mvc:resources location="/WEB-INF/static/bower_components/bootstrap/dist/css/" mapping="bower_components/bootstrap/dist/css/**"></mvc:resources>
    <mvc:resources location="/WEB-INF/static/bower_components/bootstrap/dist/js/" mapping="bower_components/bootstrap/dist/js/**"></mvc:resources>
    <mvc:resources location="/WEB-INF/static/bower_components/bootstrap/dist/fonts/" mapping="bower_components/bootstrap/dist/fonts/**"></mvc:resources>
    <mvc:resources location="/WEB-INF/static/bower_components/chosen/" mapping="bower_components/chosen/**"></mvc:resources>
    <mvc:resources location="/WEB-INF/static/bower_components/colorbox/example3/" mapping="bower_components/colorbox/example3/**"></mvc:resources>
    <mvc:resources location="/WEB-INF/static/bower_components/responsive-tables/" mapping="bower_components/responsive-tables/**"></mvc:resources>
    <mvc:resources location="/WEB-INF/static/bower_components/bootstrap-tour/build/css/" mapping="bower_components/bootstrap-tour/build/css/**"></mvc:resources>
    <mvc:resources location="/WEB-INF/static/bower_components/bootstrap/dist/css/" mapping="bower_components/bootstrap/dist/css/**"></mvc:resources>
    <mvc:resources location="/WEB-INF/static/bower_components/bootstrap/dist/fonts/" mapping="bower_components/bootstrap/dist/fonts/**"></mvc:resources>
    <mvc:resources location="/WEB-INF/static/bower_components/bootstrap/dist/js/" mapping="bower_components/bootstrap/dist/js/**"></mvc:resources>
    <mvc:resources location="/WEB-INF/static/bower_components/bootstrap/fonts/" mapping="bower_components/bootstrap/fonts/**"></mvc:resources>
    <mvc:resources location="/WEB-INF/static/bower_components/bootstrap/grunt/" mapping="bower_components/bootstrap/grunt/**"></mvc:resources>
    <mvc:resources location="/WEB-INF/static/bower_components/bootstrap/js/" mapping="bower_components/bootstrap/js/**"></mvc:resources>
    <mvc:resources location="/WEB-INF/static/bower_components/bootstrap/less/mixins/" mapping="bower_components/bootstrap/less/mixins/**"></mvc:resources>
    <mvc:resources location="/WEB-INF/static/bower_components/bootstrap/less/" mapping="bower_components/bootstrap/less/**"></mvc:resources>
    <mvc:resources location="/WEB-INF/static/bower_components/bootstrap/" mapping="bower_components/bootstrap/**"></mvc:resources>
    <mvc:resources location="/WEB-INF/static/bower_components/bootstrap-tour/build/css/" mapping="bower_components/bootstrap-tour/build/css/**"></mvc:resources>
    <mvc:resources location="/WEB-INF/static/bower_components/bootstrap-tour/build/js/" mapping="bower_components/bootstrap-tour/build/js/**"></mvc:resources>
    <mvc:resources location="/WEB-INF/static/bower_components/bootstrap-tour/docs/assets/css/" mapping="bower_components/bootstrap-tour/docs/assets/css/**"></mvc:resources>
    <mvc:resources location="/WEB-INF/static/bower_components/bootstrap-tour/docs/assets/js/" mapping="bower_components/bootstrap-tour/docs/assets/js/**"></mvc:resources>
    <mvc:resources location="/WEB-INF/static/bower_components/bootstrap-tour/docs/assets/fonts/" mapping="bower_components/bootstrap-tour/docs/assets/fonts/**"></mvc:resources>
    <mvc:resources location="/WEB-INF/static/bower_components/bootstrap-tour/docs/assets/img/" mapping="bower_components/bootstrap-tour/docs/assets/img/**"></mvc:resources>
    <mvc:resources location="/WEB-INF/static/bower_components/bootstrap-tour/docs/assets/vendor/" mapping="bower_components/bootstrap-tour/docs/assets/vendor/**"></mvc:resources>
    <mvc:resources location="/WEB-INF/static/bower_components/bootstrap-tour/docs/" mapping="bower_components/bootstrap-tour/docs/**"></mvc:resources>
    <mvc:resources location="/WEB-INF/static/bower_components/bootstrap-tour/src/coffee/" mapping="bower_components/bootstrap-tour/src/coffee/**"></mvc:resources>
    <mvc:resources location="/WEB-INF/static/bower_components/bootstrap-tour/src/less/" mapping="bower_components/bootstrap-tour/src/less/**"></mvc:resources>
    <mvc:resources location="/WEB-INF/static/bower_components/bootstrap-tour/src/spec/" mapping="bower_components/bootstrap-tour/src/spec/**"></mvc:resources>
    <mvc:resources location="/WEB-INF/static/bower_components/bootstrap-tour/src/" mapping="bower_components/bootstrap-tour/src/**"></mvc:resources>
    <mvc:resources location="/WEB-INF/static/bower_components/bootstrap-tour/" mapping="bower_components/bootstrap-tour/**"></mvc:resources>
    <mvc:resources location="/WEB-INF/static/bower_components/chosen/docsupport/" mapping="bower_components/chosen/docsupport/**"></mvc:resources>
    <mvc:resources location="/WEB-INF/static/bower_components/chosen/" mapping="bower_components/chosen/**"></mvc:resources>
    <mvc:resources location="/WEB-INF/static/bower_components/" mapping="bower_components/**"></mvc:resources>
    <mvc:resources location="/WEB-INF/static/bootstraptable/" mapping="bootstraptable/**"></mvc:resources>
    <mvc:resources location="/WEB-INF/static/bootstrapdatepicker/" mapping="bootstrapdatepicker/**"></mvc:resources>
	<mvc:resources location="/WEB-INF/static/bootstrapdatetimepicker/" mapping="bootstrapdatetimepicker/**"></mvc:resources>
	<mvc:resources location="/WEB-INF/static/bootstraptreeview/" mapping="bootstraptreeview/**"></mvc:resources>
	
	<mvc:resources location="/WEB-INF/static/phone/" mapping="phone/**"></mvc:resources>
	<mvc:resources location="/WEB-INF/static/integralmall/" mapping="integralmall/**"></mvc:resources>
	<mvc:resources location="/WEB-INF/static/buygoods/" mapping="buygoods/**"></mvc:resources>
    <mvc:resources location="/WEB-INF/static/select/" mapping="select/**"></mvc:resources>
    
    <mvc:resources location="/WEB-INF/static/newphone/" mapping="newphone/**"></mvc:resources>
    <mvc:resources location="/WEB-INF/static/shopping/" mapping="shopping/**"></mvc:resources>
    
    <mvc:resources location="/favicon.ico" mapping="favicon.ico"></mvc:resources>
    
    <mvc:annotation-driven  conversion-service="conversionService">
    	<mvc:argument-resolvers>
            <bean id="searchMethodArgumentsResolver" class="edu.iasd.search.SearchMethodArgumentsResolver"/>
        </mvc:argument-resolvers>
    </mvc:annotation-driven> 
	<bean id="conversionService"
            class="org.springframework.context.support.ConversionServiceFactoryBean">
        <property name="converters">
            <list>
                <bean class="edu.iasd.controller.TimestampConverter"></bean>
            </list>
        </property>
    </bean>
    
    
    <task:annotation-driven scheduler="qbScheduler" mode="proxy"/>  
    <task:scheduler id="qbScheduler" pool-size="10"/>
    
    <context:component-scan base-package="edu.iasd.wechat.utils"></context:component-scan>
    <context:component-scan base-package="edu.iasd.utils"></context:component-scan>
    
    
    <!-- 默认的注解映射的支持 -->
    <!-- <context:component-scan base-package="edu.iasd"/> -->
    <context:component-scan base-package="edu.iasd" >
		<!--  将service排除在外，意味着这个时候不初始化service	-->
		<context:exclude-filter type="annotation" expression="org.springframework.stereotype.Service"/>
	</context:component-scan>
    <!-- <mvc:annotation-driven />  -->
	<!-- <mvc:annotation-driven>
		<mvc:argument-resolvers>
            <bean id="searchMethodArgumentsResolver" class="edu.iasd.search.SearchMethodArgumentsResolver"/>
        </mvc:argument-resolvers>
	</mvc:annotation-driven>-->

    <!-- 
    <context:component-scan base-package="edu.iasd.controller"  use-default-filters="false">  
        <context:include-filter type="annotation"  expression="org.springframework.stereotype.Controller" />  
  	</context:component-scan>
  	 -->
  	
  	  
    <!-- 视图解释类 -->
    <bean
        class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="prefix" value="/WEB-INF/view/" />
        <!--可为空,方便实现自已的依据扩展名来选择视图解释类的逻辑 -->
        <property name="suffix" value=".jsp" />
    </bean>
	<!-- 
	<bean id="multipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver">
	    
	    <property name="maxUploadSize" value="80000000"/>
	</bean>
	 -->
	
    <bean class ="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter" >
	    <property name="messageConverters">
	        <list>
	            <!-- 设置返回字符串编码,避免使用@ResponseBody后返回乱码 -->
	            <bean class="org.springframework.http.converter.StringHttpMessageConverter">
	                <property name = "supportedMediaTypes">
	                    <list>
	                        <value>text/html;charset=UTF-8</value>
	                    </list>
	                </property>
	            </bean>
	            <!-- json转换器 -->
	            <bean class="org.springframework.http.converter.json.MappingJackson2HttpMessageConverter" >
	                <property name="supportedMediaTypes">
	                    <list>
	                        <value>text/html;charset=UTF-8</value>
	                    </list>
	                </property>
	            </bean>
	        </list>
	    </property>
	</bean>
	<mvc:interceptors>
        <mvc:interceptor>
            <mvc:mapping path="/Index/**"/>  
            <mvc:mapping path="/WeChat/WeChatArticleType/**"/>  
            <bean class="edu.iasd.utils.NavigateInterceptor">
            </bean>
        </mvc:interceptor>
        <mvc:interceptor>
            <mvc:mapping path="/WeChat/**"/>  
            <bean class="edu.iasd.utils.WeChatInterceptor">
            </bean>
        </mvc:interceptor>
    </mvc:interceptors>  
</beans>